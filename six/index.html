<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script type="text/javascript">
      /**
       * 可选链 ?.
       * 可选链 ?. 是一种访问嵌套对象属性的安全的方式。即使中间的属性不存在，也不会出现错误。
       * 如果 ?. 左边部分不存在，就会立即停止运算（“短路效应”）。因此，如果在 ?. 的右侧有任何进一步的函数调用或操作，它们均不会执行。
       *
       * 可选链 ?. 语法有三种形式：
       * obj?.prop —— 如果 obj 存在则返回 obj.prop，否则返回 undefined。
       * obj?.[prop] —— 如果 obj 存在则返回 obj[prop]，否则返回 undefined。
       * obj.method?.() —— 如果 obj.method 存在则调用 obj.method()，否则返回 undefined。
       **/

      //例一：
      let user = {}; // user 没有 address 属性
      console.log(user?.address?.street); // undefined（不报错）

      //例二：
      let user1 = null;
      let x = 0;
      user1?.sayHi(x++); // 没有 "user"，因此代码执行没有到达 sayHi 调用和 x++
      console.log(x); // 0，值没有增加

      //例三：
      let userAdmin = {
        admin() {
          console.log("I am admin");
        },
      };
      let userGuest = {};
      userAdmin.admin?.(); // I am admin
      userGuest.admin?.(); // 啥都没发生（没有这样的方法）

      //例四：
      let key = "firstName";
      let user2 = {
        firstName: "John",
      };
      let user3 = null;
      console.log(user2?.[key]); // John
      console.log(user3?.[key]); // undefined

      /**
       *空值合并运算符??
       *如果第一个参数不是 null/undefined，则 ?? 返回第一个参数。否则，返回第二个参数。
       || 返回第一个 真值。
       ?? 返回第一个 已定义的值。
       **/

       let a;
       console.log(a ?? "匿名"); //匿名（user 未定义）



      let height = 0;
      console.log(height || 100); // 100
      console.log(height ?? 100); // 0 （height 已定义）
    </script>
  </body>
</html>
